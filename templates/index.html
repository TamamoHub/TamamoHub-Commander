<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TamamoHub Commander</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'custom-gray': {
                            100: '#f5f5f5',
                            200: '#e5e5e5',
                            300: '#d4d4d4',
                            400: '#a3a3a3',
                            500: '#737373',
                            600: '#525252',
                            700: '#404040',
                            800: '#262626',
                            900: '#171717',
                        }
                    }
                }
            }
        }
    </script>
    <style>
        .glass-effect {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }
        
        .main-container {
            min-height: calc(100vh - 20px);
            min-width: 900px;
            width: calc(100% - 20px);
            height: calc(100vh - 20px);
            display: grid;
            grid-template-columns: minmax(650px, 3fr) minmax(250px, 1fr);
            gap: 8px;
            max-width: 100%;
            margin: 10px;
            padding: 0;
        }

        .main-content {
            display: flex;
            flex-direction: column;
            gap: 8px;
            min-width: 650px;
            height: 100%;
        }

        .side-panel {
            display: flex;
            flex-direction: column;
            gap: 8px;
            min-width: 250px;
            height: 100%;
        }

        .settings-container {
            flex: 1;
            min-height: 0;
            height: 100%;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .content-section {
            flex: 1;
            min-height: 0;
            height: 100%;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .control-button {
            width: 100%;
            padding: 0.75rem;
            border-radius: 0.5rem;
            font-weight: 500;
            transition: all 0.2s;
        }

        /* –°—Ç–∏–ª—ñ–∑–∞—Ü—ñ—è —Å–∫—Ä–æ–ª–±–∞—Ä—É */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        /* –ê–Ω—ñ–º–∞—Ü—ñ—è –¥–ª—è GitHub –ø–æ—Å–∏–ª–∞–Ω–Ω—è */
        .github-link {
            transition: all 0.3s ease;
        }

        .github-link:hover {
            transform: translateY(-2px);
        }

        .github-link:hover svg {
            transform: rotate(360deg);
            transition: transform 0.6s ease;
        }

        /* –ê–Ω—ñ–º–æ–≤–∞–Ω–∞ —ñ–∫–æ–Ω–∫–∞ —Å—Ç–∞—Ç—É—Å—É */
        .status-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 8px;
        }
        
        .status-dot.active {
            background: #22c55e;
            box-shadow: 0 0 0 rgba(34, 197, 94, 0.4);
            animation: pulse 2s infinite;
        }
        
        .status-dot.inactive {
            background: #ef4444;
        }
        
        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.4);
            }
            70% {
                box-shadow: 0 0 0 10px rgba(34, 197, 94, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(34, 197, 94, 0);
            }
        }

        /* Toast –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è */
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 1rem;
            border-radius: 0.5rem;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            z-index: 1000;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s ease;
        }

        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }

        /* –ü–æ–∫—Ä–∞—â–µ–Ω–∞ –∫–æ–Ω—Å–æ–ª—å */
        #consoleOutput {
            flex: 1;
            min-height: 0;
            max-height: calc(100vh - 300px);
            overflow-y: auto;
            overflow-x: hidden;
            margin: 0;
            font-family: 'Consolas', 'Monaco', monospace;
            line-height: 1.5;
            padding: 1rem;
            background-color: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            height: 100%;
        }

        .console-line {
            display: block;
            padding: 2px 0;
            font-size: 0.9rem;
            white-space: pre-wrap;
            word-wrap: break-word;
            width: 100%;
        }

        .console-time {
            display: inline-block;
            color: #94a3b8;
            margin-right: 8px;
            opacity: 0.8;
        }

        .console-content {
            display: inline;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .console-icon {
            flex-shrink: 0;
            width: 16px;
            height: 16px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .console-separator {
            height: 1px;
            background: rgba(255, 255, 255, 0.05);
            margin: 1px 0;
        }

        /* –ö–æ–ª—å–æ—Ä–∏ –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö —Ç–∏–ø—ñ–≤ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å */
        .console-error { color: #ef4444 !important; }
        .console-warning { color: #f59e0b !important; }
        .console-success { color: #22c55e !important; }
        .console-info { color: #60a5fa !important; }
        .console-debug { color: #a78bfa !important; }
        .console-system { color: #94a3b8 !important; }

        /* –î–æ–¥–∞–π—Ç–µ —Ü—ñ —Å—Ç–∏–ª—ñ –¥–æ —ñ—Å–Ω—É—é—á–∏—Ö */
        html, body {
            min-height: 100vh;
            min-width: 900px;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }

        body {
            background: linear-gradient(to bottom right, #262626, #171717);
            background-attachment: fixed;
        }

        /* –ö–æ–ª—å–æ—Ä–∏ –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö —Ç–∏–ø—ñ–≤ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å */
        .console-warning {
            color: #f59e0b !important;
        }

        .console-debug {
            color: #a78bfa !important;
        }

        .console-system {
            color: #94a3b8 !important;
        }

        /* –°—Ç–∏–ª—ñ –¥–ª—è —ñ–∫–æ–Ω–æ–∫ */
        .console-icon {
            margin-right: 6px;
            display: inline-block;
        }

        .console-separator {
            height: 1px;
            background: rgba(255, 255, 255, 0.1);
            margin: 4px 0;
        }

        /* Add media query for larger screens */
        @media screen and (min-width: 1920px) {
            .main-container {
                max-width: 1920px;
            }
        }

        /* Update modal styles to ensure they stay within viewport */
        .modal-container {
            max-height: calc(100vh - 40px);
            max-width: calc(100vw - 40px);
            overflow-y: auto;
        }
    </style>
</head>
<body class="text-white">
    <div class="main-container">
        <!-- –õ—ñ–≤–∞ —á–∞—Å—Ç–∏–Ω–∞ (–æ—Å–Ω–≤–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç) -->
        <div class="main-content">
            <!-- Header -->
            <div class="glass-effect p-4 rounded-xl">
                <div class="flex items-center justify-between">
                    <div class="flex items-center">
                        <!-- –ó–∞–∫–æ–º–µ–Ω—Ç—É–π—Ç–µ –∞–±–æ –≤–∏–¥–∞–ª—ñ—Ç—å —Ä—è–¥–æ–∫ –∑ –ª–æ–≥–æ—Ç–∏–ø–æ–º -->
                        <!-- <img src="{{ url_for('static', filename='logo.png') }}" alt="Logo" class="w-10 h-10 mr-3 rounded-xl"> -->
                        <h1 class="text-xl font-bold">TamamoHub Commander</h1>
                    </div>
                    <div class="flex space-x-3">
                        <button class="px-4 py-2 rounded-lg bg-custom-gray-700 hover:bg-custom-gray-600 transition-colors" onclick="showSettings()">–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</button>
                        <button class="px-4 py-2 rounded-lg bg-custom-gray-700 hover:bg-custom-gray-600 transition-colors" onclick="showConsole()">–ö–æ–Ω—Å–æ–ª—å</button>
                    </div>
                </div>
            </div>

            <!-- Main Content Area -->
            <div class="settings-container">
                <!-- Settings Section -->
                <section id="settings" class="glass-effect p-5 rounded-xl content-section">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-lg font-bold">–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</h2>
                        <div class="text-sm text-gray-400">
                            <span>–ö–æ–Ω—Ñ—ñ–≥: </span>
                            <span id="configPath" class="text-blue-400"></span>
                        </div>
                    </div>
                    <div class="space-y-4">
                        <div>
                            <label class="block mb-2 text-sm">–¢–æ–∫–µ–Ω Telegram –±–æ—Ç–∞</label>
                            <input type="text" class="w-full p-2 rounded-lg bg-custom-gray-700 border border-custom-gray-600 focus:outline-none focus:border-blue-500">
                        </div>
                        
                        <div>
                            <label class="block mb-2 text-sm">–í–∏–±–µ—Ä—ñ—Ç—å –®–Ü –º–æ–¥–µ–ª—å</label>
                            <select class="w-full p-2 rounded-lg bg-custom-gray-700/50 border border-custom-gray-600 focus:outline-none cursor-not-allowed opacity-60" disabled>
                                <option value="gemini">Gemini</option>
                                <option value="mistral">Mistral</option>
                                <option value="openai">OpenAI</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block mb-2 text-sm">–¢–∫–µ–Ω –®–Ü</label>
                            <input type="text" class="w-full p-2 rounded-lg bg-custom-gray-700/50 border border-custom-gray-600 focus:outline-none cursor-not-allowed opacity-60" disabled>
                        </div>

                        <div class="flex space-x-3 pt-2">
                            <button class="flex-1 px-4 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 transition-colors">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
                            <button class="flex-1 px-4 py-2 rounded-lg bg-red-600 hover:bg-red-700 transition-colors">–°–∫–∏–Ω—É—Ç–∏</button>
                        </div>
                    </div>
                </section>

                <!-- Console Section -->
                <section id="console" class="glass-effect p-5 rounded-xl content-section hidden">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-lg font-bold">–ö–æ–Ω—Å–æ–ª—å</h2>
                        <button onclick="clearConsole()" class="px-3 py-1 text-sm rounded-lg bg-custom-gray-700 hover:bg-custom-gray-600 transition-colors">
                            –û—á–∏—Å—Ç–∏—Ç–∏
                        </button>
                    </div>
                    <div id="consoleOutput" class="bg-custom-gray-900 p-4 rounded-lg h-[calc(100%-4rem)] overflow-y-auto font-mono text-sm whitespace-pre">
                        <!-- Console output will be here -->
                    </div>
                </section>
            </div>

            <!-- Footer -->
            <div class="glass-effect p-3 rounded-xl">
                <div class="flex items-center justify-between text-sm text-gray-400">
                    <div class="flex items-center space-x-2">
                        <span>¬© 2024 TamamoHub</span>
                    </div>
                    <div class="flex items-center space-x-1">
                        <span>–ó—Ä–æ–±–ª–µ–Ω–æ –∑</span>
                        <span class="text-red-500">‚ù§Ô∏è</span>
                        <span>–≤ –£–∫—Ä–∞—ó–Ω—ñ</span>
                    </div>
                    <a href="https://github.com/TamamoHub/TamamoHub-Commander" 
                       target="_blank" 
                       onclick="event.preventDefault(); window.location.href=this.href;"
                       class="github-link flex items-center space-x-2 hover:text-white transition-colors">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                            <path fill-rule="evenodd" d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z" clip-rule="evenodd"></path>
                        </svg>
                        <span>GitHub</span>
                    </a>
                </div>
            </div>
        </div>

        <!-- –ü—Ä–∞–≤–∞ —á–∞—Å—Ç–∏–Ω–∞ (–ø–∞–Ω–µ–ª—å –∫–µ—Ä—É–≤–∞–Ω–Ω—è) -->
        <div class="side-panel">
            <!-- Bot Controls -->
            <div class="glass-effect p-4 rounded-xl">
                <h2 class="text-lg font-bold mb-4">–ö–µ—Ä—É–≤–∞–Ω–Ω—è –±–æ—Ç–æ–º</h2>
                <div class="space-y-3">
                    <button id="startBot" class="control-button bg-green-600 hover:bg-green-700">
                        –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –±–æ—Ç–∞
                    </button>
                    <button id="stopBot" class="control-button bg-red-600 hover:bg-red-700" disabled>
                        –ó—É–ø–∏–Ω–∏—Ç–∏ –±–æ—Ç–∞
                    </button>
                </div>
            </div>

            <!-- Additional Controls -->
            <div class="glass-effect p-4 rounded-xl">
                <h2 class="text-lg font-bold mb-4">–î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ñ—É–Ω–∫—Ü—ñ—ó</h2>
                <div class="space-y-3">
                    <button onclick="checkUpdates()" class="control-button bg-blue-600 hover:bg-blue-700">
                        –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
                    </button>
                    <button onclick="showAISettings()" class="control-button bg-purple-600/50 cursor-not-allowed opacity-60" disabled>
                        –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –®–Ü
                    </button>
                    <button onclick="showStatistics()" class="control-button bg-yellow-600 hover:bg-yellow-700">
                        –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
                    </button>
                </div>
            </div>

            <!-- System Info -->
            <div class="glass-effect p-4 rounded-xl">
                <h2 class="text-lg font-bold mb-4">–°–∏—Å—Ç–µ–º–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è</h2>
                <div class="space-y-3">
                    <div class="flex items-center justify-between p-2 rounded bg-custom-gray-700/50">
                        <span>–°—Ç–∞—Ç—É—Å:</span>
                        <div class="flex items-center">
                            <span class="status-dot inactive" id="statusDot"></span>
                            <span id="botStatus" class="text-red-400">–ù–µ–∞–∫—Ç–∏–≤–Ω–∏–π</span>
                        </div>
                    </div>
                    <div class="flex items-center justify-between p-2 rounded bg-custom-gray-700/50">
                        <span>–í–µ—Ä—Å—ñ—è:</span>
                        <span id="currentVersion" class="text-blue-400">1.0.1</span>
                    </div>
                    <div class="flex items-center justify-between p-2 rounded bg-custom-gray-700/50">
                        <span>–û—Å—Ç–∞–Ω–Ω—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è:</span>
                        <span id="lastUpdate" class="text-purple-400">09.12.2024</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="toast" class="toast"></div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ -->
    <div id="statsModal" class="hidden">
        <!-- –ó–∞—Ç–µ–º–Ω–µ–Ω–∏–π —Ñ–æ–Ω -->
        <div class="fixed inset-0 bg-black bg-opacity-50 z-40"></div>
        <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞ -->
        <div class="fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50">
            <div class="bg-custom-gray-800 rounded-xl p-6 w-80 glass-effect">
                <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-xl font-bold">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
                    <button onclick="closeStatsModal()" class="text-gray-400 hover:text-white">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>

                <!-- –û—Å–Ω–æ–≤–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è -->
                <div class="space-y-6">
                    <!-- –ü–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è -->
                    <div class="bg-custom-gray-700/50 p-4 rounded-lg text-center">
                        <div class="text-4xl font-bold text-blue-400 mb-2" id="totalMessages">0</div>
                        <div class="text-sm text-gray-400">
                            <span class="inline-flex items-center">
                                <span class="mr-2">üí¨</span>
                                –û–±—Ä–æ–±–ª–µ–Ω–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
                            </span>
                        </div>
                    </div>

                    <!-- –ß–∞—Å —Ä–æ–±–æ—Ç–∏ -->
                    <div class="bg-custom-gray-700/50 p-4 rounded-lg text-center">
                        <div class="flex justify-center items-baseline space-x-2 mb-2">
                            <div class="text-4xl font-bold text-purple-400" id="uptimeHours">0</div>
                            <div class="text-2xl font-bold text-purple-300">:</div>
                            <div class="text-4xl font-bold text-purple-400" id="uptimeMinutes">00</div>
                            <div class="text-2xl font-bold text-purple-300">:</div>
                            <div class="text-4xl font-bold text-purple-400" id="uptimeSeconds">00</div>
                        </div>
                        <div class="text-sm text-gray-400">
                            <span class="inline-flex items-center">
                                <span class="mr-2">‚è±Ô∏è</span>
                                –ß–∞—Å —Ä–æ–±–æ—Ç–∏
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è -->
    <div id="updateModal" class="hidden">
        <!-- –ó–∞—Ç–µ–º–Ω–µ–Ω–∏–π —Ñ–æ–Ω -->
        <div class="fixed inset-0 bg-black bg-opacity-50 z-40"></div>
        <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞ -->
        <div class="fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50">
            <div class="bg-custom-gray-800 rounded-xl p-6 w-[480px] glass-effect">
                <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
                <div class="flex justify-between items-start mb-6">
                    <div class="flex items-center space-x-3">
                        <div class="w-12 h-12 rounded-full bg-blue-500/20 flex items-center justify-center">
                            <svg class="w-6 h-6 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                            </svg>
                        </div>
                        <h2 class="text-xl font-bold" id="updateTitle">–î–æ—Å—Ç—É–ø–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è!</h2>
                    </div>
                    <button onclick="closeUpdateModal()" class="text-gray-400 hover:text-white">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>

                <!-- –í–µ—Ä—Å—ñ—ó -->
                <p class="text-sm text-gray-400 mb-4" id="updateVersions"></p>

                <!-- –û—Å–Ω–æ–≤–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è -->
                <div class="space-y-4">
                    <!-- –î–∞—Ç–∞ —Ä–µ–ª—ñ–∑—É -->
                    <div class="flex items-center space-x-2 text-sm">
                        <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                        </svg>
                        <span class="text-gray-400">–î–∞—Ç–∞ —Ä–µ–ª—ñ–∑—É:</span>
                        <span class="text-white" id="updateDate"></span>
                    </div>

                    <!-- –°–ø–∏—Å–æ–∫ –∑–º—ñ–Ω -->
                    <div class="bg-custom-gray-700/30 rounded-lg p-4">
                        <div class="max-h-[200px] overflow-y-auto overflow-x-hidden pr-2">
                            <h3 class="text-sm font-semibold mb-2 text-gray-300">–ó–º—ñ–Ω–∏ –≤ –Ω–æ–≤—ñ–π –≤–µ—Ä—Å—ñ—ó:</h3>
                            <div class="text-sm text-gray-400 space-y-1 break-words whitespace-pre-wrap" id="updateNotes"></div>
                        </div>
                    </div>

                    <!-- –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è -->
                    <div class="text-sm text-yellow-400" id="updateMessage"></div>

                    <!-- –ö–Ω–æ–ø–∫–∏ -->
                    <div class="flex space-x-3 pt-2">
                        <button onclick="openReleasePage()" class="flex-1 px-4 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 transition-colors text-white font-medium">
                            –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
                        </button>
                        <button onclick="closeUpdateModal()" class="px-4 py-2 rounded-lg bg-custom-gray-700 hover:bg-custom-gray-600 transition-colors text-gray-300">
                            –ü—ñ–∑–Ω—ñ—à–µ
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –î–æ–¥–∞–π—Ç–µ Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- –î–æ–¥–∞–π—Ç–µ JavaScript –∫–æ–¥ -->
    <script>
        function showSettings() {
            document.getElementById('settings').classList.remove('hidden');
            document.getElementById('console').classList.add('hidden');
        }

        function showConsole() {
            document.getElementById('settings').classList.add('hidden');
            document.getElementById('console').classList.remove('hidden');
        }

        // –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å –ø—Ä–∏ —Å—Ç–∞—Ä—Ç—ñ
        window.onload = function() {
            fetch('/load_settings')
                .then(response => response.json())
                .then(data => {
                    document.querySelector('input[type="text"]').value = data.telegram_token;
                    document.querySelector('select').value = data.ai_model;
                    document.querySelectorAll('input[type="text"]')[1].value = data.ai_token;
                });

            // –î–æ–¥–∞—î–º–æ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É —Å—Ç–∞—Ç—É—Å—É –±–æ—Ç–∞
            fetch('/bot_status')
                .then(response => response.json())
                .then(data => {
                    updateBotStatus(data.is_active);
                    // –û–Ω–æ–≤–ª—é—î–º–æ —Å—Ç–∞ –∫–Ω–æ–ø–æ–∫
                    document.getElementById('startBot').disabled = data.is_active;
                    document.getElementById('stopBot').disabled = !data.is_active;
                    if (data.is_active) {
                        connectWebSocket();
                    }
                });

            // –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ —à–ª—è—Ö –¥–æ –∫–æ–Ω—Ñ—ñ–≥—É
            loadConfigPath();
        }

        // –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å
        document.querySelector('.bg-blue-600').onclick = function() {
            const data = {
                telegram_token: document.querySelector('input[type="text"]').value,
                ai_model: document.querySelector('select').value,
                ai_token: document.querySelectorAll('input[type="text"]')[1].value
            };

            fetch('/save_settings', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(data => {
                showToast('–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –±–µ—Ä–∂–µ–Ω–æ!', 'success');
            });
        }

        // –°–∫–∏–¥–∞–Ω–Ω—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å
        document.querySelector('.bg-red-600').onclick = function() {
            if (confirm('–í–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ, —â–æ —Ö–æ—á–µ—Ç–µ –≤–∏–¥–∞–ª–∏—Ç–∏ –≤—Å—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è?')) {
                fetch('/reset_settings')
                    .then(response => response.json())
                    .then(data => {
                        if (data.status === 'success') {
                            // –û—á–∏—â–∞—î–º–æ –ø–æ–ª—è —Ñ–æ—Ä–º–∏
                            document.querySelector('input[type="text"]').value = '';
                            document.querySelector('select').value = 'gemini';
                            document.querySelectorAll('input[type="text"]')[1].value = '';
                            showToast('–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–∫–∏–Ω—É—Ç–æ!', 'info');
                            
                            // –ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ —Å—Ç–æ—Ä—ñ–Ω–∫—É –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –≤—Å—ñ—Ö –¥–∞–Ω–∏—Ö
                            setTimeout(() => {
                                window.location.reload();
                            }, 1000);
                        } else {
                            showToast('–ü–æ–º–∏–ª–∫–∞ —Å–∫–∏–¥–∞–Ω–Ω—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å: ' + data.message, 'error');
                        }
                    })
                    .catch(error => {
                        showToast('–ü–æ–º–∏–ª–∫–∞ —Å–∫–∏–¥–∞–Ω–Ω—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å', 'error');
                        console.error('–ü–æ–º–∏–ª–∫–∞:', error);
                    });
            }
        }

        let socket = null;

        function connectWebSocket() {
            socket = new WebSocket('ws://localhost:5000/ws');
            
            socket.onopen = function() {
                console.log("WebSocket –∑'—î–¥–Ω–∞–Ω–Ω—è –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ");
                // Load initial logs when connection is established
                loadInitialLogs();
            };
            
            socket.onmessage = function(event) {
                appendToConsole(event.data);
            };
            
            socket.onerror = function(error) {
                console.error("WebSocket –ø–æ–º–∏–ª–∫–∞:", error);
                appendToConsole("[ERROR] –ü–æ–º–∏–ª–∫–∞ WebSocket –∑'—î–¥–Ω–∞–Ω–Ω—è");
            };
            
            socket.onclose = function() {
                console.log("WebSocket –∑'—î–¥–Ω–∞–Ω–Ω—è –∑–∞–∫—Ä–∏—Ç–æ");
                appendToConsole("[INFO] WebSocket –∑'—î–¥–Ω–∞–Ω–Ω—è –∑–∞–∫—Ä–∏—Ç–æ");
            };
        }

        function clearConsole() {
            document.getElementById('consoleOutput').innerHTML = '';
        }

        // –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞—Ç—É—Å—É –±–æ—Ç–∞
        function updateBotStatus(isActive) {
            const statusElement = document.getElementById('botStatus');
            const statusDot = document.getElementById('statusDot');
            
            if (isActive) {
                statusElement.textContent = '–ê–∫—Ç–∏–≤–Ω–∏–π';
                statusElement.className = 'text-green-400';
                statusDot.className = 'status-dot active';
            } else {
                statusElement.textContent = '–ù–µ–∞–∫—Ç–∏–≤–Ω–∏–π';
                statusElement.className = 'text-red-400';
                statusDot.className = 'status-dot inactive';
            }
        }

        // –û–Ω–æ–≤—ñ—Ç—å –æ–±—Ä–æ–±–Ω–∏–∫ –∫–Ω–ø–∫–∏ Start
        document.getElementById('startBot').onclick = function() {
            fetch('/start_bot')
                .then(response => response.json())
                .then(data => {
                    if (data.status === 'success') {
                        this.disabled = true;
                        document.getElementById('stopBot').disabled = false;
                        connectWebSocket();
                        updateBotStatus(true);  // –û–Ω–æ–≤–ª—é—î–º —Å—Ç–∞—Ç—É—Å
                    }
                });
        };

        // –û–Ω–æ–≤—ñ—Ç—å –æ–±—Ä–æ–±–Ω–∏–∫ –∫–Ω–æ–ø–∫–∏ Stop
        document.getElementById('stopBot').onclick = function() {
            fetch('/stop_bot')
                .then(response => response.json())
                .then(data => {
                    if (data.status === 'success') {
                        this.disabled = true;
                        document.getElementById('startBot').disabled = false;
                        if (socket) {
                            socket.close();
                        }
                        updateBotStatus(false);  // –û–Ω–æ–≤–ª—é—î–º–æ —Å—Ç–∞—Ç—É—Å
                    }
                });
        };

        function showAISettings() {
            showToast('–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –®–Ü —Ç–∏–º—á–∞—Å–æ–≤–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ñ', 'info');
        }

        function showStatistics() {
            fetch('/get_statistics')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('statsModal').classList.remove('hidden');
                    
                    // –û–Ω–æ–≤–ª—é—î–º–æ –æ—Å–Ω–æ–≤–Ω—ñ –ø–æ–∫–∞–∑–Ω–∏–∫–∏
                    document.getElementById('totalMessages').textContent = data.general.total_messages;
                    
                    // –ü–∞—Ä—Å–∏–º–æ —á–∞—Å —Ä–æ–±–æ—Ç
                    const uptimeMatch = data.general.uptime.match(/(\d+)d (\d+)h (\d+)m (\d+)s/);
                    if (uptimeMatch) {
                        const [_, days, hours, minutes, seconds] = uptimeMatch;
                        const totalHours = parseInt(days) * 24 + parseInt(hours);
                        document.getElementById('uptimeHours').textContent = totalHours;
                        document.getElementById('uptimeMinutes').textContent = minutes.padStart(2, '0');
                        document.getElementById('uptimeSeconds').textContent = seconds.padStart(2, '0');
                        
                        // –ó–∞–ø—É—Å–∫—î–º–æ —Ç–∞–π–º–µ—Ä
                        startUptimeTimer(totalHours, parseInt(minutes), parseInt(seconds));
                    }
                });
        }

        let uptimeInterval;
        
        function startUptimeTimer(hours, minutes, seconds) {
            // –û—á–∏—â–∞—î–º–æ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π —ñ–Ω—Ç–µ—Ä–≤–∞–ª, —è–∫—â–æ –≤—ñ–Ω —ñ—Å–Ω—É—î
            if (uptimeInterval) {
                clearInterval(uptimeInterval);
            }
            
            uptimeInterval = setInterval(() => {
                seconds++;
                if (seconds >= 60) {
                    seconds = 0;
                    minutes++;
                    if (minutes >= 60) {
                        minutes = 0;
                        hours++;
                    }
                }
                
                document.getElementById('uptimeHours').textContent = hours;
                document.getElementById('uptimeMinutes').textContent = minutes.toString().padStart(2, '0');
                document.getElementById('uptimeSeconds').textContent = seconds.toString().padStart(2, '0');
            }, 1000);
        }
        
        function closeStatsModal() {
            document.getElementById('statsModal').classList.add('hidden');
            // –ó—É–ø–∏–Ω—è—î–º–æ —Ç–∞–π–º–µ—Ä –ø—Ä–∏ –∑–∞–∫—Ä–∏—Ç—Ç—ñ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞
            if (uptimeInterval) {
                clearInterval(uptimeInterval);
            }
        }

        let currentReleaseUrl = '';

        function openReleasePage() {
            if (currentReleaseUrl) {
                window.open(currentReleaseUrl, '_blank');
            }
        }

        function closeUpdateModal() {
            document.getElementById('updateModal').classList.add('hidden');
        }

        function checkUpdates() {
            fetch('/check_updates')
                .then(response => response.json())
                .then(data => {
                    if (data.has_updates) {
                        // –ü–æ–∫–∞–∑—É—î–º –æ–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ
                        document.getElementById('updateModal').classList.remove('hidden');
                        
                        // –û–Ω–æ–≤–ª—é—î–º–æ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é
                        document.getElementById('updateVersions').textContent = 
                            `–í–µ—Ä—Å—ñ—è ${data.current_version} ‚Üí ${data.latest_version}`;
                        document.getElementById('updateDate').textContent = data.release_date;
                        
                        // –§–æ—Ä–º–∞—Ç—É—î–º–æ —Å–ø–∏—Å–æ–∫ –∑–º—ñ–Ω
                        const notes = data.release_notes.split('\n')
                            .filter(note => note.trim())
                            .map(note => `<div>‚Ä¢ ${note}</div>`)
                            .join('');
                        document.getElementById('updateNotes').innerHTML = notes;
                        
                        document.getElementById('updateMessage').textContent = data.message;
                        currentReleaseUrl = data.release_url;
                    } else {
                        alert(`–£ –≤–∞—Å –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –Ω–∞–π–Ω–æ–≤—ñ—à–∞ –≤–µ—Ä—Å—ñ—è (${data.current_version})!`);
                    }
                })
                .catch(error => {
                    alert('–ü–æ–º–∏–ª–∫–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫ –æ–Ω–æ–≤–ª–µ–Ω—å. –°–ø—Ä–æ–±—É–π—Ç–µ –ø—ñ–∑–Ω—ñ—à–µ.');
                    console.error('–ü–æ–º–∏–ª–∫–∞:', error);
                });
        }

        function showToast(message, type = 'info') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = `toast show ${type}`;
            
            setTimeout(() => {
                toast.className = 'toast';
            }, 3000);
        }

        function getMessageIcon(type) {
            switch(type.toLowerCase()) {
                case 'error': return '‚ùå';
                case 'warning': return '‚ö†Ô∏è';
                case 'success': return '‚úÖ';
                case 'info': return '‚ÑπÔ∏è';
                case 'debug': return 'üîç';
                case 'system': return 'üîß';
                default: return '‚Ä¢';
            }
        }

        function getMessageClass(message) {
            if (message.includes('[ERROR]')) return 'console-error';
            if (message.includes('[WARNING]')) return 'console-warning';
            if (message.includes('[SUCCESS]')) return 'console-success';
            if (message.includes('[INFO]')) return 'console-info';
            if (message.includes('[DEBUG]')) return 'console-debug';
            if (message.includes('[SYSTEM]')) return 'console-system';
            return 'console-info';
        }

        function appendToConsole(message) {
            const consoleOutput = document.getElementById('consoleOutput');
            
            // –û–Ω–æ–≤–ª–µ–Ω–∏–π —Ä–µ–≥—É–ª—è—Ä–Ω–∏–π –≤–∏—Ä–∞–∑ –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö —Ñ–æ—Ä–º–∞—Ç—ñ–≤ –ª–æ–≥—ñ–≤
            const logRegex = /^\[?([\d-]+ [\d:,]+)\]?\s*(?:\[(INFO|ERROR|WARNING|SUCCESS|DEBUG|SYSTEM)\])?\s*(.+)$/;
            const match = message.match(logRegex);
            
            if (!match) {
                // –Ø–∫—â–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –Ω–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î —Ñ–æ—Ä–º–∞—Ç—É, –¥–æ–¥–∞—î–º–æ —è–∫ –∑–≤–∏—á–∞–π–Ω–∏–π —Ç–µ–∫—Å—Ç
                const line = document.createElement('div');
                line.className = 'console-line';
                line.textContent = message;
                consoleOutput.appendChild(line);
                return;
            }
            
            const [_, timestamp, level = 'INFO', content] = match;
            
            // –°—Ç–≤–æ—Ä—é—î–º–æ –µ–ª–µ–º–µ–Ω—Ç–∏
            const line = document.createElement('div');
            line.className = 'console-line';
            
            // –î–æ–¥–∞—î–º–æ timestamp
            const timeSpan = document.createElement('span');
            timeSpan.className = 'console-time';
            timeSpan.textContent = `[${timestamp}]`;
            
            // –°—Ç–≤–æ—Ä—é—î–º–æ –∫–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç—É
            const contentSpan = document.createElement('span');
            let messageClass = 'console-info';
            let icon = '‚ÑπÔ∏è';
            
            // –í–∏–∑–Ω–∞—á–∞—î–º–æ —Ç–∏–ø –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —Ç–∞ —ñ–∫–æ–Ω–∫—É
            switch (level.toUpperCase()) {
                case 'ERROR':
                    messageClass = 'console-error';
                    icon = '‚ùå';
                    break;
                case 'WARNING':
                    messageClass = 'console-warning';
                    icon = '‚ö†Ô∏è';
                    break;
                case 'SUCCESS':
                    messageClass = 'console-success';
                    icon = '‚úÖ';
                    break;
                case 'DEBUG':
                    messageClass = 'console-debug';
                    icon = 'üîç';
                    break;
                case 'SYSTEM':
                    messageClass = 'console-system';
                    icon = 'üîß';
                    break;
                case 'INFO':
                default:
                    messageClass = 'console-info';
                    icon = '‚ÑπÔ∏è';
            }
            
            contentSpan.className = `console-content ${messageClass}`;
            
            // –î–æ–¥–∞—î–º–æ —ñ–∫–æ–Ω–∫—É —Ç–∞ —Ç–µ–∫—Å—Ç
            const iconSpan = document.createElement('span');
            iconSpan.className = 'console-icon';
            iconSpan.textContent = icon;
            
            // –û—á–∏—â–∞—î–º–æ ANSI –∫–æ–ª—å–æ—Ä–æ–≤—ñ –∫–æ–¥–∏ —Ç–∞ —Ñ–æ—Ä–º–∞—Ç—É—î–º–æ —Ç–µ–∫—Å—Ç
            let cleanContent = content
                .replace(/\[\d+m/g, '')
                .replace(/\[\d+;\d+m/g, '')
                .trim();
            
            // –î–æ–¥–∞—î–º–æ —Ä—ñ–≤–µ–Ω—å –ª–æ–≥—É–≤–∞–Ω–Ω—è, —è–∫—â–æ –≤—ñ–Ω —î
            if (level && level !== 'INFO') {
                cleanContent = `[${level}] ${cleanContent}`;
            }
            
            contentSpan.appendChild(iconSpan);
            contentSpan.appendChild(document.createTextNode(cleanContent));
            
            // –ó–±–∏—Ä–∞—î–º–æ –≤—Å–µ —Ä–∞–∑–æ–º
            line.appendChild(timeSpan);
            line.appendChild(contentSpan);
            
            // –î–æ–¥–∞—î–º–æ —Ä–æ–∑–¥—ñ–ª—å–Ω–∏–∫
            const separator = document.createElement('div');
            separator.className = 'console-separator';
            
            consoleOutput.appendChild(line);
            consoleOutput.appendChild(separator);
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π —Å–∫—Ä–æ–ª–ª –≤–Ω–∏–∑
            requestAnimationFrame(() => {
                consoleOutput.scrollTop = consoleOutput.scrollHeight;
            });
        }

        // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —à–ª—è—Ö—É –¥–æ –∫–æ–Ω—Ñ—ñ–≥—É
        function loadConfigPath() {
            fetch('/config_path')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('configPath').textContent = data.path;
                    // –î–æÔøΩÔøΩ–∞—î–º–æ —Ç—É–ª—Ç—ñ–ø –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–Ω—ñ
                    document.getElementById('configPath').title = data.path;
                })
                .catch(error => console.error('–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —à–ª—è—Ö—É –¥–æ –∫–æ–Ω—Ñ—ñ–≥—É:', error));
        }

        // –û–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø–æ—á–∞—Ç–∫–æ–≤–∏—Ö –ª–æ–≥—ñ–≤
        function loadInitialLogs() {
            fetch('/get_logs')
                .then(response => response.text())
                .then(logs => {
                    const consoleOutput = document.getElementById('consoleOutput');
                    consoleOutput.innerHTML = ''; // –û—á–∏—â–∞—î–º–æ –ø–µ—Ä–µ–¥ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è–º
                    
                    // –†–æ–∑–¥—ñ–ª—è—î–º–æ –ª–æ–≥–∏ –Ω —Ä—è–¥–∫–∏ —Ç–∞ –æ–±—Ä–æ–±–ª—è—î–º–æ –∫–æ–∂–µ–Ω
                    logs.split('\n').forEach(line => {
                        if (line.trim()) {
                            appendToConsole(line);
                        }
                    });
                })
                .catch(error => console.error('Error loading logs:', error));
        }
    </script>
</body>
</html>